<!DOCTYPE HTML>
<html>
<head>

    <title>Google Web SSO Demo</title>

    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="color-scheme" content="light">

    <style>
body {
     display: flex;
     flex-direction: column;
     justify-content: center;
     align-items: center;
     height: 100vh;
     margin: 0;
     font-family: sans-serif;
     background-color: #f0f0f0;
 }

 button {
     display: block;
     margin: 10px 0;
     padding: 15px 30px;
     font-size: 18px;
     cursor: pointer;
     border: none;
     border-radius: 5px;
     background-color: #007bff;
     color: white;
     transition: background-color 0.3s ease;
 }

 button:hover {
     background-color: #0056b3;
 }

 #debug {
     margin-top: 20px;
     padding: 10px 20px;
     font-size: 16px;
     color: #333;
     background-color: #fff;
     border: 1px solid #ccc;
     border-radius: 5px;
     box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
 }
    </style>

    <script type="text/javascript">

        // Function to get query parameter by name
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        function openMobileApp() {
            // Get the 'code' parameter from the URL
            const code = getQueryParam('code');

            const deepLinkUrl = `asbstockbroking://cmcmarkets.com/google_auth?code=${code}`;
            window.location.href = deepLinkUrl;
        }



        // Function to display the 'code' parameter for debugging
        function displayCodeParam() {
            const code = getQueryParam('code');
            const state = getQueryParam('state');
            document.getElementById('debug').innerHTML = `code: ${code} <br> state: ${state}`;
        }

        // Call displayCodeParam on page load
        window.onload = function() {
            displayCodeParam();
            openMobileApp();
        };
    </script>


</head>

<body style="margin:0px;">
    <button onclick="openMobileApp()">Open Mobile App</button>

    <div id="debug"></div>

</body>

</html>
